<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
	
		<title th:text="${header}">title place holder</title>
	
		<!-- Required meta tags -->
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	    <!-- Bootstrap CSS -->
	    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
		
		
		
		<style>
			.cover {
				position:relative; 
				overflow: hidden;
				height: 195px;
				width:100%;
			}
			.cover img {
				position: absolute;
				width:100%;
			}
			.movie-title {
				min-height: 100px;
			}
			.jumbotron {
			  min-height:100%;
			  background:linear-gradient(90deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.8)), url("img/cinema-1241422.jpg");
			  background-size:cover;
			}
			.jumbotron h1 {
				color: white; 
    			text-shadow: 0 0 5px black;
			}
			.lead 
			{
				color: white; 
				text-shadow: 0 0 5px black;
			}
        </style>
		
		
	</head>
	

	<body>

		<!-- handlebar templates -->
	 	<script id="movie-template" type="text/x-handlebars-template">
	 	
		 	<div class="col-md-4">
	          <div class="card mb-4 shadow-sm">
	            <div class="cover">
		           <img src="{{image}}" {{#if image_top}}style="top: {{image_top}}"{{/if}}>
	            </div>
	            <div class="card-body">
	              <p class="card-text movie-title">{{title}}</p>
	              <div class="d-flex justify-content-between align-items-center">
	                <div class="btn-group">
	                
	                  {{#if link}}
	                  <button type="button" class="btn btn-sm btn-outline-secondary" data-toggle="tooltip" data-placement="top" title="Video schauen">
		                  <a href="{{link}}" >
		                    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-camera-video-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  <path d="M2.667 3h6.666C10.253 3 11 3.746 11 4.667v6.666c0 .92-.746 1.667-1.667 1.667H2.667C1.747 13 1 12.254 1 11.333V4.667C1 3.747 1.746 3 2.667 3z"/>
							  <path d="M7.404 8.697l6.363 3.692c.54.313 1.233-.066 1.233-.697V4.308c0-.63-.693-1.01-1.233-.696L7.404 7.304a.802.802 0 0 0 0 1.393z"/>
							</svg>
		                  </a>
	                  </button>
	                  {{^}}
	                  <button type="button" class="btn btn-sm btn-outline-secondary" data-toggle="tooltip" data-placement="top" title="Trailer schauen">
		                  <a href="{{link_trailer}}" >
							<svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-film" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  <path fill-rule="evenodd" d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0h8v6H4V1zm8 8H4v6h8V9zM1 1h2v2H1V1zm2 3H1v2h2V4zM1 7h2v2H1V7zm2 3H1v2h2v-2zm-2 3h2v2H1v-2zM15 1h-2v2h2V1zm-2 3h2v2h-2V4zm2 3h-2v2h2V7zm-2 3h2v2h-2v-2zm2 3h-2v2h2v-2z"/>
							</svg>							
		                  </a>
	                  </button>
	                  {{/if}}
	                  
	                  <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					    <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-list" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
						  <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
						</svg>
					  </button>
					  <div class="dropdown-menu">
					  
					    <a class="dropdown-item" href="https://dfriedenberger.github.io/flashcard/#https://movie.frittenburger.de/cards/{{id}}">
					        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-collection" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  <path fill-rule="evenodd" d="M14.5 13.5h-13A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5zm-13 1A1.5 1.5 0 0 1 0 13V6a1.5 1.5 0 0 1 1.5-1.5h13A1.5 1.5 0 0 1 16 6v7a1.5 1.5 0 0 1-1.5 1.5h-13zM2 3a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11A.5.5 0 0 0 2 3zm2-2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7A.5.5 0 0 0 4 1z"/>
							</svg>
					   		Vokabel-Lernkarteien
					    </a>
					    <a class="dropdown-item" href="/learn/{{id}}">
					       <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-card-text" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							 <path fill-rule="evenodd" d="M14.5 3h-13a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
							 <path fill-rule="evenodd" d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>
						   </svg>
					       Vokabel-Liste
					    </a>
					    <a class="dropdown-item" href="/cards/{{id}}" download>
						    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-cloud-download-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  <path fill-rule="evenodd" d="M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.5a.5.5 0 0 1 1 0V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0zm-.354 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V11h-1v3.293l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"/>
							</svg>
					    	Vokabeln downloaden (JSON)
					    </a>
					    <div class="dropdown-divider"></div>
					    	
					    {{#if link}}
					    <a class="dropdown-item" href="{{link}}" >
		                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-camera-video-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  <path d="M2.667 3h6.666C10.253 3 11 3.746 11 4.667v6.666c0 .92-.746 1.667-1.667 1.667H2.667C1.747 13 1 12.254 1 11.333V4.667C1 3.747 1.746 3 2.667 3z"/>
							  <path d="M7.404 8.697l6.363 3.692c.54.313 1.233-.066 1.233-.697V4.308c0-.63-.693-1.01-1.233-.696L7.404 7.304a.802.802 0 0 0 0 1.393z"/>
							</svg>
							Video schauen
		                 </a>
					    {{/if}}
					    {{#if link_trailer}}
					    <a class="dropdown-item" href="{{link_trailer}}" >
		                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-film" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  <path fill-rule="evenodd" d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0h8v6H4V1zm8 8H4v6h8V9zM1 1h2v2H1V1zm2 3H1v2h2V4zM1 7h2v2H1V7zm2 3H1v2h2v-2zm-2 3h2v2H1v-2zM15 1h-2v2h2V1zm-2 3h2v2h-2V4zm2 3h-2v2h2V7zm-2 3h2v2h-2v-2zm2 3h-2v2h2v-2z"/>
							</svg>
							Trailer schauen
		                 </a>
					    {{/if}}	
					    {{#if link_amazon}}
					    <a class="dropdown-item" href="{{link_amazon}}" >
		                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-cart4" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  <path fill-rule="evenodd" d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
							</svg>
							Bei Amazon kaufen
		                 </a>
					    {{/if}}	
					    	
					  </div>
	                  
	                  
	                </div>
	                <small class="text-muted">{{words}}</small>
	                <small class="text-muted">{{duration}}</small>
	              </div>
	            </div>
	          </div>
	        </div>
	 	
		</script>


		<main role="main">

		
		<section class="jumbotron text-center">
		    <div class="container">
		      <h1>Sprachenlernen mit Filmen</h1>
		      <p class="lead">Erst die Vokabeln passend zum Untertitel lernen und dann den Film genie&szlig;en.</p>
		      <!-- <p>
		        <a href="#" class="btn btn-primary my-2">Main call to action</a>
		        <a href="#" class="btn btn-secondary my-2">Secondary action</a>
		      </p> -->
		    </div>
  		</section>

		  <div class="album py-5 bg-light">
		    <div class="container">
		
		      	<div id="movies" class="row">  </div>
				
				
				
		     </div>
		  </div>


		</main>

		<footer class="container">
			<p>&copy; frittenburger.de 2020</p>
		</footer>


		<script src="js/jquery-3.4.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

		<script src="../js/handlebars-v4.1.2.js"></script>
		
	   <script>
	  
	   
	   $( document ).ready(function() {
      
   
            var movieSource = document.getElementById("movie-template").innerHTML;
		    var movieTemplate = Handlebars.compile(movieSource);
   
		
		
		    function showMovie(id)
		    {
		    	$.get( "metadata/"+id, function( md ) {
				     	
				     	console.log(md);
				     
					    var movie = $(movieTemplate({ 
					    	id: id,
					        title: md.title,
					    	image: md.image,
					    	image_top: md.image_top,
					    	link: md.link,
					    	link_trailer: md.link_trailer,
					    	link_amazon: md.link_amazon,
					    	words: md.words+" Vokabeln",
					    	duration: md.minutes +" min"
					    }));
					    
					    $(movie).find('[data-toggle="tooltip"]').tooltip()
					    $("#movies").append(movie);
				});
		    }

            $.get( "list-movies", function( data ) {
				console.log(data);
				var l = data.length;
				for (var i = 0; i < l; i++) {
				    showMovie(data[i]);
				}
			});

			
	   });
	   </script>

	</body>

</html>
